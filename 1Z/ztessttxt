1. STATIC OPTIONS - D·ªØ li·ªáu c·ªë ƒë·ªãnh
1.1. Dropdown ƒë∆°n gi·∫£n (kh√¥ng search)
javascripthpaControlField("#genderSelect", {
    searchable: false,
    placeholder: "Ch·ªçn gi·ªõi t√≠nh...",
    options: [
        { value: "M", text: "Nam" },
        { value: "F", text: "N·ªØ" },
        { value: "O", text: "Kh√°c" }
    ]
});
1.2. Dropdown c√≥ search
javascripthpaControlField("#countrySelect", {
    searchable: true,
    placeholder: "Ch·ªçn qu·ªëc gia...",
    options: [
        { value: "VN", text: "Vi·ªát Nam" },
        { value: "US", text: "Hoa K·ª≥" },
        { value: "JP", text: "Nh·∫≠t B·∫£n" },
        { value: "KR", text: "H√†n Qu·ªëc" }
    ]
});
1.3. C√≥ gi√° tr·ªã m·∫∑c ƒë·ªãnh ƒë∆∞·ª£c ch·ªçn
javascripthpaControlField("#prioritySelect", {
    options: [
        { value: 1, text: "Th·∫•p" },
        { value: 2, text: "Trung b√¨nh" },
        { value: 3, text: "Cao" },
        { value: 4, text: "Kh·∫©n c·∫•p" }
    ],
    selected: 2  // M·∫∑c ƒë·ªãnh ch·ªçn "Trung b√¨nh"
});
1.4. C√≥ onChange callback
javascripthpaControlField("#statusSelect", {
    options: [
        { value: "pending", text: "Ch·ªù x·ª≠ l√Ω" },
        { value: "processing", text: "ƒêang x·ª≠ l√Ω" },
        { value: "completed", text: "Ho√†n th√†nh" }
    ],
    onChange: function(value) {
        console.log("Status changed to:", value);
        // Update UI or call API
        updateTaskStatus(value);
    }
});

2. DATASOURCE - T·ª´ bi·∫øn JavaScript
2.1. T·ª´ array c√≥ s·∫µn
javascriptconst departments = [
    { id: 1, name: "IT" },
    { id: 2, name: "HR" },
    { id: 3, name: "Finance" }
];

hpaControlField("#departmentSelect", {
    searchable: true,
    dataSource: departments,
    valueField: "id",
    textField: "name"
});
2.2. T·ª´ API response
javascript$.ajax({
    url: "/api/categories",
    success: function(response) {
        hpaControlField("#categorySelect", {
            searchable: true,
            options: response.data.map(cat => ({
                value: cat.CategoryID,
                text: cat.CategoryName
            }))
        });
    }
});

3. API - ajaxListName (Custom Stored Procedure)
3.1. C∆° b·∫£n - Load t·ª´ SP
javascripthpaControlField("#employeeSelect", {
    searchable: true,
    placeholder: "Ch·ªçn nh√¢n vi√™n...",
    useApi: true,
    take: 20,
    ajaxListName: "sp_Employee_GetList",
    
    tableName: "tblTask",
    columnName: "AssignedEmployeeID",
    idColumnName: "TaskID",
    idValue: currentTaskID
});
3.2. V·ªõi ProcParam
javascripthpaControlField("#taskSelect", {
    searchable: true,
    useApi: true,
    take: 20,
    ajaxListName: "sp_Task_GetListByProject",
    procParam: `@ProjectID=${currentProjectID}`,  // Truy·ªÅn tham s·ªë v√†o SP
    
    tableName: "tblTaskDependency",
    columnName: "DependentTaskID",
    idColumnName: "TaskID",
    idValue: currentTaskID
});
3.3. Parent Task (lo·∫°i tr·ª´ ch√≠nh n√≥)
javascripthpaControlField("#parentTaskSelect", {
    searchable: true,
    placeholder: "Ch·ªçn c√¥ng vi·ªác cha...",
    useApi: true,
    take: 20,
    ajaxListName: "sp_Task_GetListForParent",
    procParam: `@ExcludeTaskID=${currentTaskID}`,  // Lo·∫°i tr·ª´ task hi·ªán t·∫°i
    
    tableName: "tblTask",
    columnName: "ParentTaskID",
    idColumnName: "TaskID",
    idValue: currentTaskID
});
3.4. V·ªõi onChange v√† full item data
javascripthpaControlField("#projectSelect", {
    searchable: true,
    useApi: true,
    ajaxListName: "sp_Project_GetList",
    
    onChange: function(value, item) {
        console.log("Project ID:", value);
        console.log("Project Name:", item.ProjectName);
        console.log("Project Status:", item.Status);
        console.log("Project Manager:", item.ManagerID);
        
        // Load related data
        loadProjectTasks(value);
        loadProjectTeam(item.ManagerID);
    }
});
3.5. Silent mode (kh√¥ng hi·ªán th√¥ng b√°o khi save)
javascripthpaControlField("#quickStatusSelect", {
    useApi: true,
    ajaxListName: "sp_Status_GetList",
    
    tableName: "tblTask",
    columnName: "StatusID",
    idColumnName: "TaskID",
    idValue: currentTaskID,
    silent: true  // Kh√¥ng hi·ªán alert khi save th√†nh c√¥ng
});

4. API - ajaxGetCombobox (Simple Table Query)
4.1. L·∫•y to√†n b·ªô b·∫£ng
javascripthpaControlField("#statusSelect", {
    searchable: true,
    useApi: true,
    ajaxGetCombobox: true,
    take: 20,
    
    // GET DATA
    sourceTableName: "tblStatus",
    sourceColumnName: "StatusName",
    sourceIdColumnName: "StatusID",
    
    // SAVE DATA
    tableName: "tblTask",
    columnName: "StatusID",
    idColumnName: "TaskID",
    idValue: currentTaskID
});
4.2. V·ªõi WHERE clause
javascripthpaControlField("#activeEmployeeSelect", {
    searchable: true,
    useApi: true,
    ajaxGetCombobox: true,
    
    // GET DATA - Ch·ªâ nh√¢n vi√™n active
    sourceTableName: "tblEmployee",
    sourceColumnName: "FullName",
    sourceIdColumnName: "EmployeeID",
    whereClause: "IsActive = 1 AND DepartmentID IS NOT NULL",
    
    // SAVE DATA
    tableName: "tblTask",
    columnName: "AssignedEmployeeID",
    idColumnName: "TaskID",
    idValue: currentTaskID
});
4.3. WHERE ƒë·ªông theo ƒëi·ªÅu ki·ªán
javascriptfunction loadEmployeeByDepartment(departmentID) {
    hpaControlField("#employeeSelect", {
        searchable: true,
        useApi: true,
        ajaxGetCombobox: true,
        
        sourceTableName: "tblEmployee",
        sourceColumnName: "FullName",
        sourceIdColumnName: "EmployeeID",
        whereClause: `DepartmentID = ${departmentID} AND IsActive = 1`,
        
        tableName: "tblTask",
        columnName: "AssignedEmployeeID",
        idColumnName: "TaskID",
        idValue: currentTaskID
    });
}

// G·ªçi khi thay ƒë·ªïi department
$("#departmentSelect").on("change", function() {
    loadEmployeeByDepartment($(this).val());
});
4.4. Nhi·ªÅu ƒëi·ªÅu ki·ªán WHERE ph·ª©c t·∫°p
javascripthpaControlField("#productSelect", {
    searchable: true,
    useApi: true,
    ajaxGetCombobox: true,
    
    sourceTableName: "tblProduct",
    sourceColumnName: "ProductName",
    sourceIdColumnName: "ProductID",
    whereClause: `
        IsActive = 1 
        AND Stock > 0 
        AND CategoryID IN (1,2,3) 
        AND Price BETWEEN 100000 AND 5000000
    `,
    
    tableName: "tblOrderDetail",
    columnName: "ProductID",
    idColumnName: "OrderDetailID",
    idValue: currentOrderDetailID
});

5. MULTI-SELECT - Ch·ªçn nhi·ªÅu gi√° tr·ªã
5.1. Multi-select c∆° b·∫£n
javascripthpaControlField("#tagsSelect", {
    searchable: true,
    multi: true,  // ‚≠ê Cho ph√©p ch·ªçn nhi·ªÅu
    placeholder: "Ch·ªçn tags...",
    options: [
        { value: 1, text: "Urgent" },
        { value: 2, text: "Bug" },
        { value: 3, text: "Feature" },
        { value: 4, text: "Enhancement" }
    ]
});
5.2. Multi-select v·ªõi gi√° tr·ªã m·∫∑c ƒë·ªãnh
javascripthpaControlField("#skillsSelect", {
    searchable: true,
    multi: true,
    selectedValues: [2, 5, 7],  // ‚≠ê Ch·ªçn s·∫µn nhi·ªÅu gi√° tr·ªã
    options: [
        { value: 1, text: "JavaScript" },
        { value: 2, text: "Python" },
        { value: 3, text: "Java" },
        { value: 5, text: "SQL" },
        { value: 7, text: "React" }
    ]
});
5.3. Multi-select v·ªõi API
javascripthpaControlField("#assigneesSelect", {
    searchable: true,
    multi: true,
    useApi: true,
    ajaxGetCombobox: true,
    
    sourceTableName: "tblEmployee",
    sourceColumnName: "FullName",
    sourceIdColumnName: "EmployeeID",
    whereClause: "IsActive = 1",
    
    tableName: "tblTask",
    columnName: "AssignedEmployeeIDs",  // L∆∞u d·∫°ng "1,3,5,7"
    idColumnName: "TaskID",
    idValue: currentTaskID,
    
    onChange: function(selectedArray) {
        console.log("Selected IDs:", selectedArray);  // [1, 3, 5, 7]
        console.log("Count:", selectedArray.length);
    }
});
5.4. Multi-select l·∫•y data v√† text
javascriptconst control = hpaControlField("#categoriesSelect", {
    multi: true,
    useApi: true,
    ajaxListName: "sp_Category_GetList"
});

// L·∫•y gi√° tr·ªã ƒë√£ ch·ªçn
const selectedIDs = control.getValue();  // [1, 3, 5]
console.log("Selected:", selectedIDs);

6. MULTI-COLUMN - Hi·ªÉn th·ªã nhi·ªÅu c·ªôt
6.1. Multi-column c∆° b·∫£n
javascripthpaControlField("#employeeSelect", {
    searchable: true,
    useApi: true,
    ajaxGetCombobox: true,
    
    sourceTableName: "tblEmployee",
    sourceColumnName: "FullName",
    sourceIdColumnName: "EmployeeID",
    
    // ‚≠ê Multi-column config
    columns: [
        { field: 'FullName', label: 'H·ªç t√™n', width: '40%' },
        { field: 'Email', label: 'Email', width: '35%' },
        { field: 'Department', label: 'Ph√≤ng ban', width: '25%' }
    ],
    
    valueField: 'EmployeeID',
    textField: 'FullName',
    searchColumns: ['FullName', 'Email', 'Department'],
    
    tableName: "tblTask",
    columnName: "AssignedEmployeeID",
    idColumnName: "TaskID",
    idValue: currentTaskID
});
6.2. Multi-column v·ªõi custom display
javascripthpaControlField("#taskSelect", {
    searchable: true,
    useApi: true,
    ajaxListName: "sp_Task_GetList",
    
    columns: [
        { field: 'TaskName', label: 'T√™n task', width: '50%' },
        { field: 'Status', label: 'Tr·∫°ng th√°i', width: '20%' },
        { field: 'Priority', label: '∆Øu ti√™n', width: '15%' },
        { field: 'DueDate', label: 'H·∫°n', width: '15%' }
    ],
    
    valueField: 'TaskID',
    textField: 'TaskName',
    searchColumns: ['TaskName', 'Status'],
    
    // ‚≠ê Custom display khi ƒë√£ ch·ªçn
    displayTemplate: (item) => {
        return `${item.TaskName} [${item.Status}]`;
    },
    
    onChange: function(value, item) {
        console.log("Task:", item.TaskName);
        console.log("Status:", item.Status);
        console.log("Priority:", item.Priority);
        console.log("Due:", item.DueDate);
    }
});
6.3. Multi-column v·ªõi ajaxListName
javascripthpaControlField("#productSelect", {
    searchable: true,
    useApi: true,
    ajaxListName: "sp_Product_GetListWithDetails",
    
    columns: [
        { field: 'ProductName', label: 'S·∫£n ph·∫©m', width: '35%' },
        { field: 'SKU', label: 'M√£ SP', width: '15%' },
        { field: 'Category', label: 'Danh m·ª•c', width: '20%' },
        { field: 'Price', label: 'Gi√°', width: '15%' },
        { field: 'Stock', label: 'T·ªìn', width: '15%' }
    ],
    
    valueField: 'ProductID',
    textField: 'ProductName',
    searchColumns: ['ProductName', 'SKU', 'Category']
});
6.4. Multi-column + Multi-select
javascripthpaControlField("#teamsSelect", {
    searchable: true,
    multi: true,  // ‚≠ê Ch·ªçn nhi·ªÅu + nhi·ªÅu c·ªôt
    useApi: true,
    ajaxGetCombobox: true,
    
    sourceTableName: "tblEmployee",
    sourceColumnName: "FullName",
    sourceIdColumnName: "EmployeeID",
    whereClause: "IsActive = 1",
    
    columns: [
        { field: 'FullName', label: 'T√™n', width: '40%' },
        { field: 'Position', label: 'Ch·ª©c v·ª•', width: '30%' },
        { field: 'Department', label: 'Ph√≤ng', width: '30%' }
    ],
    
    valueField: 'EmployeeID',
    textField: 'FullName',
    searchColumns: ['FullName', 'Position', 'Department'],
    
    tableName: "tblProject",
    columnName: "TeamMemberIDs",
    idColumnName: "ProjectID",
    idValue: currentProjectID
});

7. ADVANCED FEATURES - T√≠nh nƒÉng n√¢ng cao
7.1. Programmatic control
javascriptconst control = hpaControlField("#statusSelect", {
    useApi: true,
    ajaxListName: "sp_Status_GetList"
});

// Set gi√° tr·ªã
control.setValue(3);

// L·∫•y gi√° tr·ªã
const currentValue = control.getValue();
console.log("Current:", currentValue);

// L·∫•y text hi·ªÉn th·ªã
const currentText = control.getText();
console.log("Text:", currentText);

// L·∫•y full item object
const selectedItem = control.getSelectedItem();
console.log("Full item:", selectedItem);

// Destroy control
control.destroy();
7.2. Dynamic reload
javascriptlet employeeControl;

function loadEmployeesByDepartment(deptID) {
    // Destroy old control
    if (employeeControl) {
        employeeControl.destroy();
    }
    
    // Create new control
    employeeControl = hpaControlField("#employeeSelect", {
        searchable: true,
        useApi: true,
        ajaxGetCombobox: true,
        
        sourceTableName: "tblEmployee",
        sourceColumnName: "FullName",
        sourceIdColumnName: "EmployeeID",
        whereClause: `DepartmentID = ${deptID}`,
        
        tableName: "tblTask",
        columnName: "AssignedEmployeeID",
        idColumnName: "TaskID",
        idValue: currentTaskID
    });
}

$("#departmentSelect").on("change", function() {
    loadEmployeesByDepartment($(this).val());
});
7.3. Cascading dropdowns
javascript// Dropdown 1: Ch·ªçn t·ªânh/th√†nh
hpaControlField("#provinceSelect", {
    searchable: true,
    useApi: true,
    ajaxGetCombobox: true,
    
    sourceTableName: "tblProvince",
    sourceColumnName: "ProvinceName",
    sourceIdColumnName: "ProvinceID",
    
    onChange: function(provinceID) {
        // Load districts khi ch·ªçn province
        loadDistrictsByProvince(provinceID);
    }
});

// Dropdown 2: Ch·ªçn qu·∫≠n/huy·ªán
function loadDistrictsByProvince(provinceID) {
    hpaControlField("#districtSelect", {
        searchable: true,
        useApi: true,
        ajaxGetCombobox: true,
        
        sourceTableName: "tblDistrict",
        sourceColumnName: "DistrictName",
        sourceIdColumnName: "DistrictID",
        whereClause: `ProvinceID = ${provinceID}`,
        
        onChange: function(districtID) {
            // Load wards khi ch·ªçn district
            loadWardsByDistrict(districtID);
        }
    });
}

// Dropdown 3: Ch·ªçn ph∆∞·ªùng/x√£
function loadWardsByDistrict(districtID) {
    hpaControlField("#wardSelect", {
        searchable: true,
        useApi: true,
        ajaxGetCombobox: true,
        
        sourceTableName: "tblWard",
        sourceColumnName: "WardName",
        sourceIdColumnName: "WardID",
        whereClause: `DistrictID = ${districtID}`
    });
}
7.4. Conditional options
javascriptconst userRole = getCurrentUserRole();

hpaControlField("#taskStatusSelect", {
    searchable: true,
    useApi: true,
    ajaxGetCombobox: true,
    
    sourceTableName: "tblTaskStatus",
    sourceColumnName: "StatusName",
    sourceIdColumnName: "StatusID",
    whereClause: userRole === "Admin" 
        ? "1=1"  // Admin th·∫•y t·∫•t c·∫£
        : "IsPublic = 1",  // User th∆∞·ªùng ch·ªâ th·∫•y public statuses
    
    tableName: "tblTask",
    columnName: "StatusID",
    idColumnName: "TaskID",
    idValue: currentTaskID
});
7.5. Kh√¥ng auto-save (manual save)
javascriptconst control = hpaControlField("#employeeSelect", {
    searchable: true,
    useApi: true,
    ajaxListName: "sp_Employee_GetList",
    
    // ‚≠ê Kh√¥ng truy·ªÅn tableName, columnName, idValue => Kh√¥ng auto-save
    
    onChange: function(value, item) {
        // X·ª≠ l√Ω th·ªß c√¥ng
        $("#selectedEmployeeID").val(value);
        $("#selectedEmployeeName").text(item.FullName);
    }
});

// Save th·ªß c√¥ng khi c·∫ßn
$("#saveButton").on("click", function() {
    const selectedID = control.getValue();
    
    $.ajax({
        url: "/api/task/update",
        method: "POST",
        data: {
            taskID: currentTaskID,
            assignedEmployeeID: selectedID
        },
        success: function() {
            alert("Saved!");
        }
    });
});
7.6. Read-only / Disabled state
javascriptconst control = hpaControlField("#statusSelect", {
    useApi: true,
    ajaxListName: "sp_Status_GetList"
});

// Disable/Enable th·ªß c√¥ng
function setReadOnly(isReadOnly) {
    if (isReadOnly) {
        $("#statusSelect").find(".hpa-field-display").css({
            "pointer-events": "none",
            "opacity": "0.6",
            "cursor": "not-allowed"
        });
    } else {
        $("#statusSelect").find(".hpa-field-display").css({
            "pointer-events": "auto",
            "opacity": "1",
            "cursor": "pointer"
        });
    }
}

// D√πng khi c·∫ßn
if (!canEdit) {
    setReadOnly(true);
}
7.7. Custom "Create New" handler
javascripthpaControlField("#categorySelect", {
    searchable: true,
    useApi: true,
    ajaxGetCombobox: true,
    
    sourceTableName: "tblCategory",
    sourceColumnName: "CategoryName",
    sourceIdColumnName: "CategoryID",
    
    // ‚≠ê Custom create handler (m·∫∑c ƒë·ªãnh ƒë√£ c√≥ s·∫µn)
    // Khi user g√µ keyword m·ªõi v√† click "Th√™m m·ªõi", h√†m defaultCreateNew s·∫Ω ch·∫°y
    // N√≥ s·∫Ω g·ªçi sp_Common_SaveDataTable ƒë·ªÉ t·∫°o record m·ªõi
});
7.8. Pre-selected values from database
javascript// Load task v√† set gi√° tr·ªã ƒë√£ ch·ªçn
$.ajax({
    url: `/api/task/${taskID}`,
    success: function(task) {
        const control = hpaControlField("#employeeSelect", {
            searchable: true,
            useApi: true,
            ajaxListName: "sp_Employee_GetList",
            selected: task.AssignedEmployeeID,  // ‚≠ê Set gi√° tr·ªã ƒë√£ ch·ªçn
            
            tableName: "tblTask",
            columnName: "AssignedEmployeeID",
            idColumnName: "TaskID",
            idValue: taskID
        });
    }
});
7.9. Performance tuning
javascripthpaControlField("#largeDataSelect", {
    searchable: true,
    useApi: true,
    ajaxListName: "sp_HugeTable_GetList",
    
    take: 50,  // ‚≠ê TƒÉng s·ªë l∆∞·ª£ng load m·ªói l·∫ßn (default: 20)
    
    // V·ªõi ajaxGetCombobox mode, n√™n d√πng ajaxListName cho b·∫£ng l·ªõn
    // v√¨ ajaxGetCombobox load t·∫•t c·∫£ data v·ªÅ client
});
7.10. Debug mode
javascript// M·ªü Console (F12) ƒë·ªÉ xem logs khi development

hpaControlField("#debugSelect", {
    searchable: true,
    useApi: true,
    ajaxListName: "sp_Test_GetList"
});

// C√°c logs s·∫Ω hi·ªán:
// üîµ fetchPage called with skip: 0
// ‚úÖ fetchPage returned: 20 items
// üü¢ initialApiLoad - filter: ""
// ‚úÖ initialApiLoad done - skip now: 20, hasMore: true
// üìú Scroll triggered loadMore
// üü° loadMore called
// üì¶ loadMore received: 20 items